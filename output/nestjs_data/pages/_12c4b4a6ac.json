{
  "url": "https://docs.nestjs.com/openapi/operations",
  "title": "",
  "content": "In OpenAPI terms, paths are endpoints (resources), such as /users or /reports/summary, that your API exposes, and operations are the HTTP methods used to manipulate these paths, such as GET, POST or DELETE.\n\nTo attach a controller to a specific tag, use the @ApiTags(...tags) decorator.\n\nTo define custom headers that are expected as part of the request, use @ApiHeader().\n\nTo define a custom HTTP response, use the @ApiResponse() decorator.\n\nNest provides a set of short-hand API response decorators that inherit from the @ApiResponse decorator:\n\nTo specify a return model for a request, we must create a class and annotate all properties with the @ApiProperty() decorator.\n\nThen the Cat model can be used in combination with the type property of the response decorator.\n\nLet's open the browser and verify the generated Cat model:\n\nInstead of defining responses for each endpoint or controller individually, you can define a global response for all endpoints using the DocumentBuilder class. This approach is useful when you want to define a global response for all endpoints in your application (e.g., for errors like 401 Unauthorized or 500 Internal Server Error).\n\nYou can enable file upload for a specific method with the @ApiBody decorator together with @ApiConsumes(). Here's a full example using the File Upload technique:\n\nWhere FileUploadDto is defined as follows:\n\nTo handle multiple files uploading, you can define FilesUploadDto as follows:\n\nTo add an Extension to a request use the @ApiExtension() decorator. The extension name must be prefixed with x-.\n\nWith the ability to provide Raw Definitions, we can define Generic schema for Swagger UI. Assume we have the following DTO:\n\nWe skip decorating results as we will be providing a raw definition for it later. Now, let's define another DTO and name it, for example, CatDto, as follows:\n\nWith this in place, we can define a PaginatedDto<CatDto> response, as follows:\n\nIn this example, we specify that the response will have allOf PaginatedDto and the results property will be of type Array<CatDto>.\n\nLastly, since PaginatedDto is not directly referenced by any controller, the SwaggerModule will not be able to generate a corresponding model definition just yet. In this case, we must add it as an Extra Model. For example, we can use the @ApiExtraModels() decorator on the controller level, as follows:\n\nIf you run Swagger now, the generated swagger.json for this specific endpoint should have the following response defined:\n\nTo make it reusable, we can create a custom decorator for PaginatedDto, as follows:\n\nTo ensure that SwaggerModule will generate a definition for our model, we must add it as an extra model, like we did earlier with the PaginatedDto in the controller.\n\nWith this in place, we can use the custom @ApiPaginatedResponse() decorator on our endpoint:\n\nFor client generation tools, this approach poses an ambiguity in how the PaginatedResponse<TModel> is being generated for the client. The following snippet is an example of a client generator result for the above GET / endpoint.\n\nAs you can see, the Return Type here is ambiguous. To workaround this issue, you can add a title property to the schema for ApiPaginatedResponse:\n\nNow the result of the client generator tool will become:",
  "headings": [
    {
      "level": "h3",
      "text": "Operations",
      "id": "operations"
    },
    {
      "level": "h4",
      "text": "Tags#",
      "id": "tags"
    },
    {
      "level": "h4",
      "text": "Headers#",
      "id": "headers"
    },
    {
      "level": "h4",
      "text": "Responses#",
      "id": "responses"
    },
    {
      "level": "h4",
      "text": "File upload#",
      "id": "file-upload"
    },
    {
      "level": "h4",
      "text": "Extensions#",
      "id": "extensions"
    },
    {
      "level": "h4",
      "text": "Advanced: Generic ApiResponse#",
      "id": "advanced-generic-apiresponse"
    }
  ],
  "code_samples": [
    {
      "code": "@ApiTags('cats')\n@Controller('cats')\nexport class CatsController {}",
      "language": "typescript"
    },
    {
      "code": "@ApiHeader({\n  name: 'X-MyHeader',\n  description: 'Custom header',\n})\n@Controller('cats')\nexport class CatsController {}",
      "language": "typescript"
    },
    {
      "code": "@Post()\n@ApiResponse({ status: 201, description: 'The record has been successfully created.'})\n@ApiResponse({ status: 403, description: 'Forbidden.'})\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}",
      "language": "typescript"
    },
    {
      "code": "@Post()\n@ApiCreatedResponse({ description: 'The record has been successfully created.'})\n@ApiForbiddenResponse({ description: 'Forbidden.'})\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}",
      "language": "typescript"
    },
    {
      "code": "export class Cat {\n  @ApiProperty()\n  id: number;\n\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}",
      "language": "typescript"
    },
    {
      "code": "@ApiTags('cats')\n@Controller('cats')\nexport class CatsController {\n  @Post()\n  @ApiCreatedResponse({\n    description: 'The record has been successfully created.',\n    type: Cat,\n  })\n  async create(@Body() createCatDto: CreateCatDto): Promise<Cat> {\n    return this.catsService.create(createCatDto);\n  }\n}",
      "language": "typescript"
    },
    {
      "code": "const config = new DocumentBuilder()\n  .addGlobalResponse({\n    status: 500,\n    description: 'Internal server error',\n  })\n  // other configurations\n  .build();",
      "language": "typescript"
    },
    {
      "code": "@UseInterceptors(FileInterceptor('file'))\n@ApiConsumes('multipart/form-data')\n@ApiBody({\n  description: 'List of cats',\n  type: FileUploadDto,\n})\nuploadFile(@UploadedFile() file: Express.Multer.File) {}",
      "language": "typescript"
    },
    {
      "code": "class FileUploadDto {\n  @ApiProperty({ type: 'string', format: 'binary' })\n  file: any;\n}",
      "language": "typescript"
    },
    {
      "code": "class FilesUploadDto {\n  @ApiProperty({ type: 'array', items: { type: 'string', format: 'binary' } })\n  files: any[];\n}",
      "language": "typescript"
    },
    {
      "code": "@ApiExtension('x-foo', { hello: 'world' })",
      "language": "typescript"
    },
    {
      "code": "export class PaginatedDto<TData> {\n  @ApiProperty()\n  total: number;\n\n  @ApiProperty()\n  limit: number;\n\n  @ApiProperty()\n  offset: number;\n\n  results: TData[];\n}",
      "language": "typescript"
    },
    {
      "code": "export class CatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}",
      "language": "php"
    },
    {
      "code": "@ApiOkResponse({\n  schema: {\n    allOf: [\n      { $ref: getSchemaPath(PaginatedDto) },\n      {\n        properties: {\n          results: {\n            type: 'array',\n            items: { $ref: getSchemaPath(CatDto) },\n          },\n        },\n      },\n    ],\n  },\n})\nasync findAll(): Promise<PaginatedDto<CatDto>> {}",
      "language": "json"
    },
    {
      "code": "@Controller('cats')\n@ApiExtraModels(PaginatedDto)\nexport class CatsController {}",
      "language": "php"
    },
    {
      "code": "\"responses\": {\n  \"200\": {\n    \"description\": \"\",\n    \"content\": {\n      \"application/json\": {\n        \"schema\": {\n          \"allOf\": [\n            {\n              \"$ref\": \"#/components/schemas/PaginatedDto\"\n            },\n            {\n              \"properties\": {\n                \"results\": {\n                  \"$ref\": \"#/components/schemas/CatDto\"\n                }\n              }\n            }\n          ]\n        }\n      }\n    }\n  }\n}",
      "language": "json"
    },
    {
      "code": "export const ApiPaginatedResponse = <TModel extends Type<any>>(\n  model: TModel,\n) => {\n  return applyDecorators(\n    ApiExtraModels(PaginatedDto, model),\n    ApiOkResponse({\n      schema: {\n        allOf: [\n          { $ref: getSchemaPath(PaginatedDto) },\n          {\n            properties: {\n              results: {\n                type: 'array',\n                items: { $ref: getSchemaPath(model) },\n              },\n            },\n          },\n        ],\n      },\n    }),\n  );\n};",
      "language": "javascript"
    },
    {
      "code": "@ApiPaginatedResponse(CatDto)\nasync findAll(): Promise<PaginatedDto<CatDto>> {}",
      "language": "typescript"
    },
    {
      "code": "// Angular\nfindAll(): Observable<{ total: number, limit: number, offset: number, results: CatDto[] }>",
      "language": "typescript"
    },
    {
      "code": "export const ApiPaginatedResponse = <TModel extends Type<any>>(\n  model: TModel,\n) => {\n  return applyDecorators(\n    ApiOkResponse({\n      schema: {\n        title: `PaginatedResponseOf${model.name}`,\n        allOf: [\n          // ...\n        ],\n      },\n    }),\n  );\n};",
      "language": "typescript"
    },
    {
      "code": "// Angular\nfindAll(): Observable<PaginatedResponseOfCatDto>",
      "language": "typescript"
    }
  ],
  "patterns": [],
  "links": [
    "https://docs.nestjs.com/first-steps",
    "https://docs.nestjs.com/controllers",
    "https://docs.nestjs.com/providers",
    "https://docs.nestjs.com/modules",
    "https://docs.nestjs.com/middleware",
    "https://docs.nestjs.com/exception-filters",
    "https://docs.nestjs.com/pipes",
    "https://docs.nestjs.com/guards",
    "https://docs.nestjs.com/interceptors",
    "https://docs.nestjs.com/custom-decorators",
    "https://docs.nestjs.com/fundamentals/custom-providers",
    "https://docs.nestjs.com/fundamentals/async-providers",
    "https://docs.nestjs.com/fundamentals/dynamic-modules",
    "https://docs.nestjs.com/fundamentals/injection-scopes",
    "https://docs.nestjs.com/fundamentals/circular-dependency",
    "https://docs.nestjs.com/fundamentals/module-ref",
    "https://docs.nestjs.com/fundamentals/lazy-loading-modules",
    "https://docs.nestjs.com/fundamentals/execution-context",
    "https://docs.nestjs.com/fundamentals/lifecycle-events",
    "https://docs.nestjs.com/fundamentals/discovery-service",
    "https://docs.nestjs.com/fundamentals/platform-agnosticism",
    "https://docs.nestjs.com/fundamentals/testing",
    "https://docs.nestjs.com/techniques/configuration",
    "https://docs.nestjs.com/techniques/database",
    "https://docs.nestjs.com/techniques/mongodb",
    "https://docs.nestjs.com/techniques/validation",
    "https://docs.nestjs.com/techniques/caching",
    "https://docs.nestjs.com/techniques/serialization",
    "https://docs.nestjs.com/techniques/versioning",
    "https://docs.nestjs.com/techniques/task-scheduling",
    "https://docs.nestjs.com/techniques/queues",
    "https://docs.nestjs.com/techniques/logger",
    "https://docs.nestjs.com/techniques/cookies",
    "https://docs.nestjs.com/techniques/events",
    "https://docs.nestjs.com/techniques/compression",
    "https://docs.nestjs.com/techniques/file-upload",
    "https://docs.nestjs.com/techniques/streaming-files",
    "https://docs.nestjs.com/techniques/http-module",
    "https://docs.nestjs.com/techniques/session",
    "https://docs.nestjs.com/techniques/mvc",
    "https://docs.nestjs.com/techniques/performance",
    "https://docs.nestjs.com/techniques/server-sent-events",
    "https://docs.nestjs.com/security/authentication",
    "https://docs.nestjs.com/security/authorization",
    "https://docs.nestjs.com/security/encryption-and-hashing",
    "https://docs.nestjs.com/security/helmet",
    "https://docs.nestjs.com/security/cors",
    "https://docs.nestjs.com/security/csrf",
    "https://docs.nestjs.com/security/rate-limiting",
    "https://docs.nestjs.com/graphql/quick-start",
    "https://docs.nestjs.com/graphql/resolvers",
    "https://docs.nestjs.com/graphql/mutations",
    "https://docs.nestjs.com/graphql/subscriptions",
    "https://docs.nestjs.com/graphql/scalars",
    "https://docs.nestjs.com/graphql/directives",
    "https://docs.nestjs.com/graphql/interfaces",
    "https://docs.nestjs.com/graphql/unions-and-enums",
    "https://docs.nestjs.com/graphql/field-middleware",
    "https://docs.nestjs.com/graphql/mapped-types",
    "https://docs.nestjs.com/graphql/plugins",
    "https://docs.nestjs.com/graphql/complexity",
    "https://docs.nestjs.com/graphql/extensions",
    "https://docs.nestjs.com/graphql/cli-plugin",
    "https://docs.nestjs.com/graphql/generating-sdl",
    "https://docs.nestjs.com/graphql/sharing-models",
    "https://docs.nestjs.com/graphql/other-features",
    "https://docs.nestjs.com/graphql/federation",
    "https://docs.nestjs.com/websockets/gateways",
    "https://docs.nestjs.com/websockets/exception-filters",
    "https://docs.nestjs.com/websockets/pipes",
    "https://docs.nestjs.com/websockets/guards",
    "https://docs.nestjs.com/websockets/interceptors",
    "https://docs.nestjs.com/websockets/adapter",
    "https://docs.nestjs.com/microservices/basics",
    "https://docs.nestjs.com/microservices/redis",
    "https://docs.nestjs.com/microservices/mqtt",
    "https://docs.nestjs.com/microservices/nats",
    "https://docs.nestjs.com/microservices/rabbitmq",
    "https://docs.nestjs.com/microservices/kafka",
    "https://docs.nestjs.com/microservices/grpc",
    "https://docs.nestjs.com/microservices/custom-transport",
    "https://docs.nestjs.com/microservices/exception-filters",
    "https://docs.nestjs.com/microservices/pipes",
    "https://docs.nestjs.com/microservices/guards",
    "https://docs.nestjs.com/microservices/interceptors",
    "https://docs.nestjs.com/standalone-applications",
    "https://docs.nestjs.com/cli/overview",
    "https://docs.nestjs.com/cli/monorepo",
    "https://docs.nestjs.com/cli/libraries",
    "https://docs.nestjs.com/cli/usages",
    "https://docs.nestjs.com/cli/scripts",
    "https://docs.nestjs.com/openapi/introduction",
    "https://docs.nestjs.com/openapi/types-and-parameters",
    "https://docs.nestjs.com/openapi/operations",
    "https://docs.nestjs.com/openapi/security",
    "https://docs.nestjs.com/openapi/mapped-types",
    "https://docs.nestjs.com/openapi/decorators",
    "https://docs.nestjs.com/openapi/cli-plugin",
    "https://docs.nestjs.com/openapi/other-features",
    "https://docs.nestjs.com/recipes/repl",
    "https://docs.nestjs.com/recipes/crud-generator",
    "https://docs.nestjs.com/recipes/swc",
    "https://docs.nestjs.com/recipes/passport",
    "https://docs.nestjs.com/recipes/hot-reload",
    "https://docs.nestjs.com/recipes/mikroorm",
    "https://docs.nestjs.com/recipes/sql-typeorm",
    "https://docs.nestjs.com/recipes/mongodb",
    "https://docs.nestjs.com/recipes/sql-sequelize",
    "https://docs.nestjs.com/recipes/router-module",
    "https://docs.nestjs.com/recipes/swagger",
    "https://docs.nestjs.com/recipes/terminus",
    "https://docs.nestjs.com/recipes/cqrs",
    "https://docs.nestjs.com/recipes/documentation",
    "https://docs.nestjs.com/recipes/prisma",
    "https://docs.nestjs.com/recipes/sentry",
    "https://docs.nestjs.com/recipes/serve-static",
    "https://docs.nestjs.com/recipes/nest-commander",
    "https://docs.nestjs.com/recipes/async-local-storage",
    "https://docs.nestjs.com/recipes/necord",
    "https://docs.nestjs.com/recipes/suites",
    "https://docs.nestjs.com/faq/serverless",
    "https://docs.nestjs.com/faq/http-adapter",
    "https://docs.nestjs.com/faq/keep-alive-connections",
    "https://docs.nestjs.com/faq/global-prefix",
    "https://docs.nestjs.com/faq/raw-body",
    "https://docs.nestjs.com/faq/hybrid-application",
    "https://docs.nestjs.com/faq/multiple-servers",
    "https://docs.nestjs.com/faq/request-lifecycle",
    "https://docs.nestjs.com/faq/common-errors"
  ]
}