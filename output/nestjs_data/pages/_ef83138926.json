{
  "url": "https://docs.nestjs.com/graphql/quick-start",
  "title": "",
  "content": "GraphQL is a powerful query language for APIs and a runtime for fulfilling those queries with your existing data. It's an elegant approach that solves many problems typically found with REST APIs. For background, we suggest reading this comparison between GraphQL and REST. GraphQL combined with TypeScript helps you develop better type safety with your GraphQL queries, giving you end-to-end typing.\n\nIn this chapter, we assume a basic understanding of GraphQL, and focus on how to work with the built-in @nestjs/graphql module. The GraphQLModule can be configured to use Apollo server (with the @nestjs/apollo driver) and Mercurius (with the @nestjs/mercurius). We provide official integrations for these proven GraphQL packages to provide a simple way to use GraphQL with Nest (see more integrations here).\n\nYou can also build your own dedicated driver (read more on that here).\n\nStart by installing the required packages:\n\nNest offers two ways of building GraphQL applications, the code first and the schema first methods. You should choose the one that works best for you. Most of the chapters in this GraphQL section are divided into two main parts: one you should follow if you adopt code first, and the other to be used if you adopt schema first.\n\nIn the code first approach, you use decorators and TypeScript classes to generate the corresponding GraphQL schema. This approach is useful if you prefer to work exclusively with TypeScript and avoid context switching between language syntaxes.\n\nIn the schema first approach, the source of truth is GraphQL SDL (Schema Definition Language) files. SDL is a language-agnostic way to share schema files between different platforms. Nest automatically generates your TypeScript definitions (using either classes or interfaces) based on the GraphQL schemas to reduce the need to write redundant boilerplate code.\n\nLearn the right way! 20+ chapters GraphQL fundamentals Official certificate Deep-dive sessions Explore official GraphQL extensions\n\nOnce the packages are installed, we can import the GraphQLModule and configure it with the forRoot() static method.\n\nThe forRoot() method takes an options object as an argument. These options are passed through to the underlying driver instance (read more about available settings here: Apollo and Mercurius). For example, if you want to disable the playground and turn off debug mode (for Apollo), pass the following options:\n\nIn this case, these options will be forwarded to the ApolloServer constructor.\n\nThe playground is a graphical, interactive, in-browser GraphQL IDE, available by default on the same URL as the GraphQL server itself. To access the playground, you need a basic GraphQL server configured and running. To see it now, you can install and build the working example here. Alternatively, if you're following along with these code samples, once you've completed the steps in the Resolvers chapter, you can access the playground.\n\nWith that in place, and with your application running in the background, you can then open your web browser and navigate to http://localhost:3000/graphql (host and port may vary depending on your configuration). You will then see the GraphQL playground, as shown below.\n\nIf your application uses subscriptions, be sure to use graphql-ws, as subscriptions-transport-ws isn't supported by GraphiQL.\n\nIn the code first approach, you use decorators and TypeScript classes to generate the corresponding GraphQL schema.\n\nTo use the code first approach, start by adding the autoSchemaFile property to the options object:\n\nThe autoSchemaFile property value is the path where your automatically generated schema will be created. Alternatively, the schema can be generated on-the-fly in memory. To enable this, set the autoSchemaFile property to true:\n\nBy default, the types in the generated schema will be in the order they are defined in the included modules. To sort the schema lexicographically, set the sortSchema property to true:\n\nA fully working code first sample is available here.\n\nTo use the schema first approach, start by adding a typePaths property to the options object. The typePaths property indicates where the GraphQLModule should look for GraphQL SDL schema definition files you'll be writing. These files will be combined in memory; this allows you to split your schemas into several files and locate them near their resolvers.\n\nYou will typically also need to have TypeScript definitions (classes and interfaces) that correspond to the GraphQL SDL types. Creating the corresponding TypeScript definitions by hand is redundant and tedious. It leaves us without a single source of truth -- each change made within SDL forces us to adjust TypeScript definitions as well. To address this, the @nestjs/graphql package can automatically generate TypeScript definitions from the abstract syntax tree (AST). To enable this feature, add the definitions options property when configuring the GraphQLModule.\n\nThe path property of the definitions object indicates where to save generated TypeScript output. By default, all generated TypeScript types are created as interfaces. To generate classes instead, specify the outputAs property with a value of 'class'.\n\nThe above approach dynamically generates TypeScript definitions each time the application starts. Alternatively, it may be preferable to build a simple script to generate these on demand. For example, assume we create the following script as generate-typings.ts:\n\nNow you can run this script on demand:\n\nTo enable watch mode for the script (to automatically generate typings whenever any .graphql file changes), pass the watch option to the generate() method.\n\nTo automatically generate the additional __typename field for every object type, enable the emitTypenameField option:\n\nTo generate resolvers (queries, mutations, subscriptions) as plain fields without arguments, enable the skipResolverArgs option:\n\nTo generate enums as TypeScript union types instead of regular TypeScript enums, set the enumsAsTypes option to true:\n\nTo use Apollo Sandbox instead of the graphql-playground as a GraphQL IDE for local development, use the following configuration:\n\nA fully working schema first sample is available here.\n\nIn some circumstances (for example end-to-end tests), you may want to get a reference to the generated schema object. In end-to-end tests, you can then run queries using the graphql object without using any HTTP listeners.\n\nYou can access the generated schema (in either the code first or schema first approach), using the GraphQLSchemaHost class:\n\nWhen you need to pass module options asynchronously instead of statically, use the forRootAsync() method. As with most dynamic modules, Nest provides several techniques to deal with async configuration.\n\nOne technique is to use a factory function:\n\nLike other factory providers, our factory function can be async and can inject dependencies through inject.\n\nAlternatively, you can configure the GraphQLModule using a class instead of a factory, as shown below:\n\nThe construction above instantiates GqlConfigService inside GraphQLModule, using it to create options object. Note that in this example, the GqlConfigService has to implement the GqlOptionsFactory interface, as shown below. The GraphQLModule will call the createGqlOptions() method on the instantiated object of the supplied class.\n\nIf you want to reuse an existing options provider instead of creating a private copy inside the GraphQLModule, use the useExisting syntax.\n\nInstead of using Apollo, Fastify users (read more here) can alternatively use the @nestjs/mercurius driver.\n\nThe forRoot() method takes an options object as an argument. These options are passed through to the underlying driver instance. Read more about available settings here.\n\nAnother useful feature of the @nestjs/graphql module is the ability to serve multiple endpoints at once. This lets you decide which modules should be included in which endpoint. By default, GraphQL searches for resolvers throughout the whole app. To limit this scan to only a subset of modules, use the include property.\n\nA working example is available here.",
  "headings": [
    {
      "level": "h2",
      "text": "Harnessing the power of TypeScript & GraphQL",
      "id": "harnessing-the-power-of-typescript--graphql"
    },
    {
      "level": "h4",
      "text": "Installation#",
      "id": "installation"
    },
    {
      "level": "h4",
      "text": "Overview#",
      "id": "overview"
    },
    {
      "level": "h2",
      "text": "Learn the right way!",
      "id": ""
    },
    {
      "level": "h4",
      "text": "Getting started with GraphQL & TypeScript#",
      "id": "getting-started-with-graphql--typescript"
    },
    {
      "level": "h4",
      "text": "GraphQL playground#",
      "id": "graphql-playground"
    },
    {
      "level": "h4",
      "text": "Code first#",
      "id": "code-first"
    },
    {
      "level": "h4",
      "text": "Example#",
      "id": "example"
    },
    {
      "level": "h4",
      "text": "Schema first#",
      "id": "schema-first"
    },
    {
      "level": "h4",
      "text": "Apollo Sandbox#",
      "id": "apollo-sandbox"
    },
    {
      "level": "h4",
      "text": "Example#",
      "id": "example-1"
    },
    {
      "level": "h4",
      "text": "Accessing generated schema#",
      "id": "accessing-generated-schema"
    },
    {
      "level": "h4",
      "text": "Async configuration#",
      "id": "async-configuration"
    },
    {
      "level": "h4",
      "text": "Mercurius integration#",
      "id": "mercurius-integration"
    },
    {
      "level": "h4",
      "text": "Multiple endpoints#",
      "id": "multiple-endpoints"
    },
    {
      "level": "h4",
      "text": "Third-party integrations#",
      "id": "third-party-integrations"
    },
    {
      "level": "h4",
      "text": "Example#",
      "id": "example-2"
    }
  ],
  "code_samples": [
    {
      "code": "# For Express and Apollo (default)\n$ npm i @nestjs/graphql @nestjs/apollo @apollo/server @as-integrations/express5 graphql\n\n# For Fastify and Apollo\n# npm i @nestjs/graphql @nestjs/apollo @apollo/server @as-integrations/fastify graphql\n\n# For Fastify and Mercurius\n# npm i @nestjs/graphql @nestjs/mercurius graphql mercurius",
      "language": "bash"
    },
    {
      "code": "import { Module } from '@nestjs/common';\nimport { GraphQLModule } from '@nestjs/graphql';\nimport { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';\n\n@Module({\n  imports: [\n    GraphQLModule.forRoot<ApolloDriverConfig>({\n      driver: ApolloDriver,\n    }),\n  ],\n})\nexport class AppModule {}",
      "language": "typescript"
    },
    {
      "code": "import { Module } from '@nestjs/common';\nimport { GraphQLModule } from '@nestjs/graphql';\nimport { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';\n\n@Module({\n  imports: [\n    GraphQLModule.forRoot<ApolloDriverConfig>({\n      driver: ApolloDriver,\n      playground: false,\n    }),\n  ],\n})\nexport class AppModule {}",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRoot<ApolloDriverConfig>({\n  driver: ApolloDriver,\n  graphiql: true,\n}),",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRoot<ApolloDriverConfig>({\n  driver: ApolloDriver,\n  autoSchemaFile: join(process.cwd(), 'src/schema.gql'),\n}),",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRoot<ApolloDriverConfig>({\n  driver: ApolloDriver,\n  autoSchemaFile: true,\n}),",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRoot<ApolloDriverConfig>({\n  driver: ApolloDriver,\n  autoSchemaFile: join(process.cwd(), 'src/schema.gql'),\n  sortSchema: true,\n}),",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRoot<ApolloDriverConfig>({\n  driver: ApolloDriver,\n  typePaths: ['./**/*.graphql'],\n}),",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRoot<ApolloDriverConfig>({\n  driver: ApolloDriver,\n  typePaths: ['./**/*.graphql'],\n  definitions: {\n    path: join(process.cwd(), 'src/graphql.ts'),\n  },\n}),",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRoot<ApolloDriverConfig>({\n  driver: ApolloDriver,\n  typePaths: ['./**/*.graphql'],\n  definitions: {\n    path: join(process.cwd(), 'src/graphql.ts'),\n    outputAs: 'class',\n  },\n}),",
      "language": "typescript"
    },
    {
      "code": "import { GraphQLDefinitionsFactory } from '@nestjs/graphql';\nimport { join } from 'node:path';\n\nconst definitionsFactory = new GraphQLDefinitionsFactory();\ndefinitionsFactory.generate({\n  typePaths: ['./src/**/*.graphql'],\n  path: join(process.cwd(), 'src/graphql.ts'),\n  outputAs: 'class',\n});",
      "language": "typescript"
    },
    {
      "code": "$ ts-node generate-typings",
      "language": "bash"
    },
    {
      "code": "definitionsFactory.generate({\n  typePaths: ['./src/**/*.graphql'],\n  path: join(process.cwd(), 'src/graphql.ts'),\n  outputAs: 'class',\n  watch: true,\n});",
      "language": "typescript"
    },
    {
      "code": "definitionsFactory.generate({\n  // ...\n  emitTypenameField: true,\n});",
      "language": "typescript"
    },
    {
      "code": "definitionsFactory.generate({\n  // ...\n  skipResolverArgs: true,\n});",
      "language": "typescript"
    },
    {
      "code": "definitionsFactory.generate({\n  // ...\n  enumsAsTypes: true,\n});",
      "language": "typescript"
    },
    {
      "code": "import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';\nimport { Module } from '@nestjs/common';\nimport { GraphQLModule } from '@nestjs/graphql';\nimport { ApolloServerPluginLandingPageLocalDefault } from '@apollo/server/plugin/landingPage/default';\n\n@Module({\n  imports: [\n    GraphQLModule.forRoot<ApolloDriverConfig>({\n      driver: ApolloDriver,\n      playground: false,\n      plugins: [ApolloServerPluginLandingPageLocalDefault()],\n    }),\n  ],\n})\nexport class AppModule {}",
      "language": "typescript"
    },
    {
      "code": "const { schema } = app.get(GraphQLSchemaHost);",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRootAsync<ApolloDriverConfig>({\n  driver: ApolloDriver,\n  useFactory: () => ({\n    typePaths: ['./**/*.graphql'],\n  }),\n}),",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRootAsync<ApolloDriverConfig>({\n  driver: ApolloDriver,\n  imports: [ConfigModule],\n  useFactory: async (configService: ConfigService) => ({\n    typePaths: configService.get<string>('GRAPHQL_TYPE_PATHS'),\n  }),\n  inject: [ConfigService],\n}),",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRootAsync<ApolloDriverConfig>({\n  driver: ApolloDriver,\n  useClass: GqlConfigService,\n}),",
      "language": "typescript"
    },
    {
      "code": "@Injectable()\nclass GqlConfigService implements GqlOptionsFactory {\n  createGqlOptions(): ApolloDriverConfig {\n    return {\n      typePaths: ['./**/*.graphql'],\n    };\n  }\n}",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRootAsync<ApolloDriverConfig>({\n  imports: [ConfigModule],\n  useExisting: ConfigService,\n}),",
      "language": "typescript"
    },
    {
      "code": "import { Module } from '@nestjs/common';\nimport { GraphQLModule } from '@nestjs/graphql';\nimport { MercuriusDriver, MercuriusDriverConfig } from '@nestjs/mercurius';\n\n@Module({\n  imports: [\n    GraphQLModule.forRoot<MercuriusDriverConfig>({\n      driver: MercuriusDriver,\n      graphiql: true,\n    }),\n  ],\n})\nexport class AppModule {}",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRoot({\n  include: [CatsModule],\n}),",
      "language": "typescript"
    }
  ],
  "patterns": [],
  "links": [
    "https://docs.nestjs.com/first-steps",
    "https://docs.nestjs.com/controllers",
    "https://docs.nestjs.com/providers",
    "https://docs.nestjs.com/modules",
    "https://docs.nestjs.com/middleware",
    "https://docs.nestjs.com/exception-filters",
    "https://docs.nestjs.com/pipes",
    "https://docs.nestjs.com/guards",
    "https://docs.nestjs.com/interceptors",
    "https://docs.nestjs.com/custom-decorators",
    "https://docs.nestjs.com/fundamentals/custom-providers",
    "https://docs.nestjs.com/fundamentals/async-providers",
    "https://docs.nestjs.com/fundamentals/dynamic-modules",
    "https://docs.nestjs.com/fundamentals/injection-scopes",
    "https://docs.nestjs.com/fundamentals/circular-dependency",
    "https://docs.nestjs.com/fundamentals/module-ref",
    "https://docs.nestjs.com/fundamentals/lazy-loading-modules",
    "https://docs.nestjs.com/fundamentals/execution-context",
    "https://docs.nestjs.com/fundamentals/lifecycle-events",
    "https://docs.nestjs.com/fundamentals/discovery-service",
    "https://docs.nestjs.com/fundamentals/platform-agnosticism",
    "https://docs.nestjs.com/fundamentals/testing",
    "https://docs.nestjs.com/techniques/configuration",
    "https://docs.nestjs.com/techniques/database",
    "https://docs.nestjs.com/techniques/mongodb",
    "https://docs.nestjs.com/techniques/validation",
    "https://docs.nestjs.com/techniques/caching",
    "https://docs.nestjs.com/techniques/serialization",
    "https://docs.nestjs.com/techniques/versioning",
    "https://docs.nestjs.com/techniques/task-scheduling",
    "https://docs.nestjs.com/techniques/queues",
    "https://docs.nestjs.com/techniques/logger",
    "https://docs.nestjs.com/techniques/cookies",
    "https://docs.nestjs.com/techniques/events",
    "https://docs.nestjs.com/techniques/compression",
    "https://docs.nestjs.com/techniques/file-upload",
    "https://docs.nestjs.com/techniques/streaming-files",
    "https://docs.nestjs.com/techniques/http-module",
    "https://docs.nestjs.com/techniques/session",
    "https://docs.nestjs.com/techniques/mvc",
    "https://docs.nestjs.com/techniques/performance",
    "https://docs.nestjs.com/techniques/server-sent-events",
    "https://docs.nestjs.com/security/authentication",
    "https://docs.nestjs.com/security/authorization",
    "https://docs.nestjs.com/security/encryption-and-hashing",
    "https://docs.nestjs.com/security/helmet",
    "https://docs.nestjs.com/security/cors",
    "https://docs.nestjs.com/security/csrf",
    "https://docs.nestjs.com/security/rate-limiting",
    "https://docs.nestjs.com/graphql/quick-start",
    "https://docs.nestjs.com/graphql/resolvers",
    "https://docs.nestjs.com/graphql/mutations",
    "https://docs.nestjs.com/graphql/subscriptions",
    "https://docs.nestjs.com/graphql/scalars",
    "https://docs.nestjs.com/graphql/directives",
    "https://docs.nestjs.com/graphql/interfaces",
    "https://docs.nestjs.com/graphql/unions-and-enums",
    "https://docs.nestjs.com/graphql/field-middleware",
    "https://docs.nestjs.com/graphql/mapped-types",
    "https://docs.nestjs.com/graphql/plugins",
    "https://docs.nestjs.com/graphql/complexity",
    "https://docs.nestjs.com/graphql/extensions",
    "https://docs.nestjs.com/graphql/cli-plugin",
    "https://docs.nestjs.com/graphql/generating-sdl",
    "https://docs.nestjs.com/graphql/sharing-models",
    "https://docs.nestjs.com/graphql/other-features",
    "https://docs.nestjs.com/graphql/federation",
    "https://docs.nestjs.com/websockets/gateways",
    "https://docs.nestjs.com/websockets/exception-filters",
    "https://docs.nestjs.com/websockets/pipes",
    "https://docs.nestjs.com/websockets/guards",
    "https://docs.nestjs.com/websockets/interceptors",
    "https://docs.nestjs.com/websockets/adapter",
    "https://docs.nestjs.com/microservices/basics",
    "https://docs.nestjs.com/microservices/redis",
    "https://docs.nestjs.com/microservices/mqtt",
    "https://docs.nestjs.com/microservices/nats",
    "https://docs.nestjs.com/microservices/rabbitmq",
    "https://docs.nestjs.com/microservices/kafka",
    "https://docs.nestjs.com/microservices/grpc",
    "https://docs.nestjs.com/microservices/custom-transport",
    "https://docs.nestjs.com/microservices/exception-filters",
    "https://docs.nestjs.com/microservices/pipes",
    "https://docs.nestjs.com/microservices/guards",
    "https://docs.nestjs.com/microservices/interceptors",
    "https://docs.nestjs.com/standalone-applications",
    "https://docs.nestjs.com/cli/overview",
    "https://docs.nestjs.com/cli/monorepo",
    "https://docs.nestjs.com/cli/libraries",
    "https://docs.nestjs.com/cli/usages",
    "https://docs.nestjs.com/cli/scripts",
    "https://docs.nestjs.com/openapi/introduction",
    "https://docs.nestjs.com/openapi/types-and-parameters",
    "https://docs.nestjs.com/openapi/operations",
    "https://docs.nestjs.com/openapi/security",
    "https://docs.nestjs.com/openapi/mapped-types",
    "https://docs.nestjs.com/openapi/decorators",
    "https://docs.nestjs.com/openapi/cli-plugin",
    "https://docs.nestjs.com/openapi/other-features",
    "https://docs.nestjs.com/recipes/repl",
    "https://docs.nestjs.com/recipes/crud-generator",
    "https://docs.nestjs.com/recipes/swc",
    "https://docs.nestjs.com/recipes/passport",
    "https://docs.nestjs.com/recipes/hot-reload",
    "https://docs.nestjs.com/recipes/mikroorm",
    "https://docs.nestjs.com/recipes/sql-typeorm",
    "https://docs.nestjs.com/recipes/mongodb",
    "https://docs.nestjs.com/recipes/sql-sequelize",
    "https://docs.nestjs.com/recipes/router-module",
    "https://docs.nestjs.com/recipes/swagger",
    "https://docs.nestjs.com/recipes/terminus",
    "https://docs.nestjs.com/recipes/cqrs",
    "https://docs.nestjs.com/recipes/documentation",
    "https://docs.nestjs.com/recipes/prisma",
    "https://docs.nestjs.com/recipes/sentry",
    "https://docs.nestjs.com/recipes/serve-static",
    "https://docs.nestjs.com/recipes/nest-commander",
    "https://docs.nestjs.com/recipes/async-local-storage",
    "https://docs.nestjs.com/recipes/necord",
    "https://docs.nestjs.com/recipes/suites",
    "https://docs.nestjs.com/faq/serverless",
    "https://docs.nestjs.com/faq/http-adapter",
    "https://docs.nestjs.com/faq/keep-alive-connections",
    "https://docs.nestjs.com/faq/global-prefix",
    "https://docs.nestjs.com/faq/raw-body",
    "https://docs.nestjs.com/faq/hybrid-application",
    "https://docs.nestjs.com/faq/multiple-servers",
    "https://docs.nestjs.com/faq/request-lifecycle",
    "https://docs.nestjs.com/faq/common-errors",
    "https://docs.nestjs.com/graphql/resolvers-map"
  ]
}