{
  "url": "https://docs.nestjs.com/graphql/unions-and-enums",
  "title": "",
  "content": "Union types are very similar to interfaces, but they don't get to specify any common fields between the types (read more here). Unions are useful for returning disjoint data types from a single field.\n\nTo define a GraphQL union type, we must define classes that this union will be composed of. Following the example from the Apollo documentation, we'll create two classes. First, Book:\n\nWith this in place, register the ResultUnion union using the createUnionType function exported from the @nestjs/graphql package:\n\nNow, we can reference the ResultUnion in our query:\n\nThis will result in generating the following part of the GraphQL schema in SDL:\n\nThe default resolveType() function generated by the library will extract the type based on the value returned from the resolver method. That means returning class instances instead of literal JavaScript object is obligatory.\n\nTo provide a customized resolveType() function, pass the resolveType property to the options object passed into the createUnionType() function, as follows:\n\nTo define a union in the schema first approach, simply create a GraphQL union with SDL.\n\nThen, you can use the typings generation feature (as shown in the quick start chapter) to generate corresponding TypeScript definitions:\n\nUnions require an extra __resolveType field in the resolver map to determine which type the union should resolve to. Also, note that the ResultUnionResolver class has to be registered as a provider in any module. Let's create a ResultUnionResolver class and define the __resolveType method.\n\nEnumeration types are a special kind of scalar that is restricted to a particular set of allowed values (read more here). This allows you to:\n\nWhen using the code first approach, you define a GraphQL enum type by simply creating a TypeScript enum.\n\nWith this in place, register the AllowedColor enum using the registerEnumType function exported from the @nestjs/graphql package:\n\nNow you can reference the AllowedColor in our types:\n\nThis will result in generating the following part of the GraphQL schema in SDL:\n\nTo provide a description for the enum, pass the description property into the registerEnumType() function.\n\nTo provide a description for the enum values, or to mark a value as deprecated, pass the valuesMap property, as follows:\n\nThis will generate the following GraphQL schema in SDL:\n\nTo define an enumerator in the schema first approach, simply create a GraphQL enum with SDL.\n\nThen you can use the typings generation feature (as shown in the quick start chapter) to generate corresponding TypeScript definitions:\n\nSometimes a backend forces a different value for an enum internally than in the public API. In this example the API contains RED, however in resolvers we may use #f00 instead (read more here). To accomplish this, declare a resolver object for the AllowedColor enum:\n\nThen use this resolver object together with the resolvers property of the GraphQLModule#forRoot() method, as follows:",
  "headings": [
    {
      "level": "h3",
      "text": "Unions",
      "id": "unions"
    },
    {
      "level": "h4",
      "text": "Code first#",
      "id": "code-first"
    },
    {
      "level": "h4",
      "text": "Schema first#",
      "id": "schema-first"
    },
    {
      "level": "h3",
      "text": "Enums",
      "id": "enums"
    },
    {
      "level": "h4",
      "text": "Code first#",
      "id": "code-first-1"
    },
    {
      "level": "h4",
      "text": "Schema first#",
      "id": "schema-first-1"
    }
  ],
  "code_samples": [
    {
      "code": "import { Field, ObjectType } from '@nestjs/graphql';\n\n@ObjectType()\nexport class Book {\n  @Field()\n  title: string;\n}",
      "language": "typescript"
    },
    {
      "code": "import { Field, ObjectType } from '@nestjs/graphql';\n\n@ObjectType()\nexport class Author {\n  @Field()\n  name: string;\n}",
      "language": "typescript"
    },
    {
      "code": "export const ResultUnion = createUnionType({\n  name: 'ResultUnion',\n  types: () => [Author, Book] as const,\n});",
      "language": "typescript"
    },
    {
      "code": "@Query(() => [ResultUnion])\nsearch(): Array<typeof ResultUnion> {\n  return [new Author(), new Book()];\n}",
      "language": "typescript"
    },
    {
      "code": "type Author {\n  name: String!\n}\n\ntype Book {\n  title: String!\n}\n\nunion ResultUnion = Author | Book\n\ntype Query {\n  search: [ResultUnion!]!\n}",
      "language": "css"
    },
    {
      "code": "export const ResultUnion = createUnionType({\n  name: 'ResultUnion',\n  types: () => [Author, Book] as const,\n  resolveType(value) {\n    if (value.name) {\n      return Author;\n    }\n    if (value.title) {\n      return Book;\n    }\n    return null;\n  },\n});",
      "language": "typescript"
    },
    {
      "code": "type Author {\n  name: String!\n}\n\ntype Book {\n  title: String!\n}\n\nunion ResultUnion = Author | Book",
      "language": "css"
    },
    {
      "code": "export class Author {\n  name: string;\n}\n\nexport class Book {\n  title: string;\n}\n\nexport type ResultUnion = Author | Book;",
      "language": "typescript"
    },
    {
      "code": "@Resolver('ResultUnion')\nexport class ResultUnionResolver {\n  @ResolveField()\n  __resolveType(value) {\n    if (value.name) {\n      return 'Author';\n    }\n    if (value.title) {\n      return 'Book';\n    }\n    return null;\n  }\n}",
      "language": "typescript"
    },
    {
      "code": "export enum AllowedColor {\n  RED,\n  GREEN,\n  BLUE,\n}",
      "language": "typescript"
    },
    {
      "code": "registerEnumType(AllowedColor, {\n  name: 'AllowedColor',\n});",
      "language": "typescript"
    },
    {
      "code": "@Field(type => AllowedColor)\nfavoriteColor: AllowedColor;",
      "language": "typescript"
    },
    {
      "code": "enum AllowedColor {\n  RED\n  GREEN\n  BLUE\n}",
      "language": "typescript"
    },
    {
      "code": "registerEnumType(AllowedColor, {\n  name: 'AllowedColor',\n  description: 'The supported colors.',\n});",
      "language": "typescript"
    },
    {
      "code": "registerEnumType(AllowedColor, {\n  name: 'AllowedColor',\n  description: 'The supported colors.',\n  valuesMap: {\n    RED: {\n      description: 'The default color.',\n    },\n    BLUE: {\n      deprecationReason: 'Too blue.',\n    },\n  },\n});",
      "language": "typescript"
    },
    {
      "code": "\"\"\"\nThe supported colors.\n\"\"\"\nenum AllowedColor {\n  \"\"\"\n  The default color.\n  \"\"\"\n  RED\n  GREEN\n  BLUE @deprecated(reason: \"Too blue.\")\n}",
      "language": "typescript"
    },
    {
      "code": "enum AllowedColor {\n  RED\n  GREEN\n  BLUE\n}",
      "language": "typescript"
    },
    {
      "code": "export enum AllowedColor {\n  RED\n  GREEN\n  BLUE\n}",
      "language": "typescript"
    },
    {
      "code": "export const allowedColorResolver: Record<keyof typeof AllowedColor, any> = {\n  RED: '#f00',\n};",
      "language": "typescript"
    },
    {
      "code": "GraphQLModule.forRoot({\n  resolvers: {\n    AllowedColor: allowedColorResolver,\n  },\n});",
      "language": "typescript"
    }
  ],
  "patterns": [],
  "links": [
    "https://docs.nestjs.com/first-steps",
    "https://docs.nestjs.com/controllers",
    "https://docs.nestjs.com/providers",
    "https://docs.nestjs.com/modules",
    "https://docs.nestjs.com/middleware",
    "https://docs.nestjs.com/exception-filters",
    "https://docs.nestjs.com/pipes",
    "https://docs.nestjs.com/guards",
    "https://docs.nestjs.com/interceptors",
    "https://docs.nestjs.com/custom-decorators",
    "https://docs.nestjs.com/fundamentals/custom-providers",
    "https://docs.nestjs.com/fundamentals/async-providers",
    "https://docs.nestjs.com/fundamentals/dynamic-modules",
    "https://docs.nestjs.com/fundamentals/injection-scopes",
    "https://docs.nestjs.com/fundamentals/circular-dependency",
    "https://docs.nestjs.com/fundamentals/module-ref",
    "https://docs.nestjs.com/fundamentals/lazy-loading-modules",
    "https://docs.nestjs.com/fundamentals/execution-context",
    "https://docs.nestjs.com/fundamentals/lifecycle-events",
    "https://docs.nestjs.com/fundamentals/discovery-service",
    "https://docs.nestjs.com/fundamentals/platform-agnosticism",
    "https://docs.nestjs.com/fundamentals/testing",
    "https://docs.nestjs.com/techniques/configuration",
    "https://docs.nestjs.com/techniques/database",
    "https://docs.nestjs.com/techniques/mongodb",
    "https://docs.nestjs.com/techniques/validation",
    "https://docs.nestjs.com/techniques/caching",
    "https://docs.nestjs.com/techniques/serialization",
    "https://docs.nestjs.com/techniques/versioning",
    "https://docs.nestjs.com/techniques/task-scheduling",
    "https://docs.nestjs.com/techniques/queues",
    "https://docs.nestjs.com/techniques/logger",
    "https://docs.nestjs.com/techniques/cookies",
    "https://docs.nestjs.com/techniques/events",
    "https://docs.nestjs.com/techniques/compression",
    "https://docs.nestjs.com/techniques/file-upload",
    "https://docs.nestjs.com/techniques/streaming-files",
    "https://docs.nestjs.com/techniques/http-module",
    "https://docs.nestjs.com/techniques/session",
    "https://docs.nestjs.com/techniques/mvc",
    "https://docs.nestjs.com/techniques/performance",
    "https://docs.nestjs.com/techniques/server-sent-events",
    "https://docs.nestjs.com/security/authentication",
    "https://docs.nestjs.com/security/authorization",
    "https://docs.nestjs.com/security/encryption-and-hashing",
    "https://docs.nestjs.com/security/helmet",
    "https://docs.nestjs.com/security/cors",
    "https://docs.nestjs.com/security/csrf",
    "https://docs.nestjs.com/security/rate-limiting",
    "https://docs.nestjs.com/graphql/quick-start",
    "https://docs.nestjs.com/graphql/resolvers",
    "https://docs.nestjs.com/graphql/mutations",
    "https://docs.nestjs.com/graphql/subscriptions",
    "https://docs.nestjs.com/graphql/scalars",
    "https://docs.nestjs.com/graphql/directives",
    "https://docs.nestjs.com/graphql/interfaces",
    "https://docs.nestjs.com/graphql/unions-and-enums",
    "https://docs.nestjs.com/graphql/field-middleware",
    "https://docs.nestjs.com/graphql/mapped-types",
    "https://docs.nestjs.com/graphql/plugins",
    "https://docs.nestjs.com/graphql/complexity",
    "https://docs.nestjs.com/graphql/extensions",
    "https://docs.nestjs.com/graphql/cli-plugin",
    "https://docs.nestjs.com/graphql/generating-sdl",
    "https://docs.nestjs.com/graphql/sharing-models",
    "https://docs.nestjs.com/graphql/other-features",
    "https://docs.nestjs.com/graphql/federation",
    "https://docs.nestjs.com/websockets/gateways",
    "https://docs.nestjs.com/websockets/exception-filters",
    "https://docs.nestjs.com/websockets/pipes",
    "https://docs.nestjs.com/websockets/guards",
    "https://docs.nestjs.com/websockets/interceptors",
    "https://docs.nestjs.com/websockets/adapter",
    "https://docs.nestjs.com/microservices/basics",
    "https://docs.nestjs.com/microservices/redis",
    "https://docs.nestjs.com/microservices/mqtt",
    "https://docs.nestjs.com/microservices/nats",
    "https://docs.nestjs.com/microservices/rabbitmq",
    "https://docs.nestjs.com/microservices/kafka",
    "https://docs.nestjs.com/microservices/grpc",
    "https://docs.nestjs.com/microservices/custom-transport",
    "https://docs.nestjs.com/microservices/exception-filters",
    "https://docs.nestjs.com/microservices/pipes",
    "https://docs.nestjs.com/microservices/guards",
    "https://docs.nestjs.com/microservices/interceptors",
    "https://docs.nestjs.com/standalone-applications",
    "https://docs.nestjs.com/cli/overview",
    "https://docs.nestjs.com/cli/monorepo",
    "https://docs.nestjs.com/cli/libraries",
    "https://docs.nestjs.com/cli/usages",
    "https://docs.nestjs.com/cli/scripts",
    "https://docs.nestjs.com/openapi/introduction",
    "https://docs.nestjs.com/openapi/types-and-parameters",
    "https://docs.nestjs.com/openapi/operations",
    "https://docs.nestjs.com/openapi/security",
    "https://docs.nestjs.com/openapi/mapped-types",
    "https://docs.nestjs.com/openapi/decorators",
    "https://docs.nestjs.com/openapi/cli-plugin",
    "https://docs.nestjs.com/openapi/other-features",
    "https://docs.nestjs.com/recipes/repl",
    "https://docs.nestjs.com/recipes/crud-generator",
    "https://docs.nestjs.com/recipes/swc",
    "https://docs.nestjs.com/recipes/passport",
    "https://docs.nestjs.com/recipes/hot-reload",
    "https://docs.nestjs.com/recipes/mikroorm",
    "https://docs.nestjs.com/recipes/sql-typeorm",
    "https://docs.nestjs.com/recipes/mongodb",
    "https://docs.nestjs.com/recipes/sql-sequelize",
    "https://docs.nestjs.com/recipes/router-module",
    "https://docs.nestjs.com/recipes/swagger",
    "https://docs.nestjs.com/recipes/terminus",
    "https://docs.nestjs.com/recipes/cqrs",
    "https://docs.nestjs.com/recipes/documentation",
    "https://docs.nestjs.com/recipes/prisma",
    "https://docs.nestjs.com/recipes/sentry",
    "https://docs.nestjs.com/recipes/serve-static",
    "https://docs.nestjs.com/recipes/nest-commander",
    "https://docs.nestjs.com/recipes/async-local-storage",
    "https://docs.nestjs.com/recipes/necord",
    "https://docs.nestjs.com/recipes/suites",
    "https://docs.nestjs.com/faq/serverless",
    "https://docs.nestjs.com/faq/http-adapter",
    "https://docs.nestjs.com/faq/keep-alive-connections",
    "https://docs.nestjs.com/faq/global-prefix",
    "https://docs.nestjs.com/faq/raw-body",
    "https://docs.nestjs.com/faq/hybrid-application",
    "https://docs.nestjs.com/faq/multiple-servers",
    "https://docs.nestjs.com/faq/request-lifecycle",
    "https://docs.nestjs.com/faq/common-errors"
  ]
}